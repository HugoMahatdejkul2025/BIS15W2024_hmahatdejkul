knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
surgery <- read_csv("data/surgery.csv")
names(surgery)
glimpse(surgery)
surgery%>%
filter(!race=="NA") %>%
group_by(race) %>%
summarize(count=n()) %>%
ggplot(aes(x=race,count,fill=race))+geom_col()
surgery %>%
summarize(countb=n(race)))
surgery %>%
summarize(countb=n(race))
surgery %>%
group_by(race)
surgery %>%
group_by(race) %>%
summarize(countb=n())
surgery %>%
group_by(asa_status)
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n())
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n()) %>%
ggplot(aes(asa_status,countofhealth))+
geom_col()
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n()) %>%
ggplot(aes(asa_status,countofhealth,color=asa_status))+
geom_col()
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n()) %>%
ggplot(aes(asa_status,countofhealth,color=asa_status,fill=asa_status))+
geom_col()
surgery %>%
ggplot(aes(asa_status,bmi))+
geom_density()
surgery %>%
ggplot(aes(bmi,asa_status))+
geom_density()
surgery %>%
group_by(asa_status)
surgery %>%
group_by(asa_status) %>%
ggplot(aes(bmi,asa_status))+
geom_density()
surgery %>%
group_by(asa_status) %>%
ggplot(aes(bmi))+
geom_density()
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status))+
geom_density()
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=bmi))+
geom_density()
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()+
face_wrap(~asa_status)
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()+
face_wrap(~asa_status,bmi)
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=bmi))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
group_by(bmi) %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(asa_status,color=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(asa_status,bmi,color=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(bmicolor=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(bmi,color=asa_status))+
geom_density()+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(bmi,color=asa_status))+
geom_density(fill="yellow")+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(bmi,color=asa_status))+
geom_density(fill="blue")+
facet_wrap(~asa_status)
surgery %>%
ggplot(aes(bmi,color=asa_status))+
geom_density(fill="blue",color="black")+
facet_wrap(~asa_status)
knitr::opts_chunk$set(echo = TRUE)
library("tidyverse")
library("janitor")
library("naniar")
surgery <- read_csv("data/surgery.csv")
surgery %>% count(race)
surgery %>%
ggplot(aes(x=race, fill=race))+
geom_bar(alpha=0.6, color="black")+
labs(title="Participants by Race",
x=NULL,
y="# participants")+
theme_light()
surgery %>%
filter(gender!="NA") %>%
group_by(gender) %>%
summarize(mean_age=mean(age, na.rm=T))
surgery%>%
filter(!race=="NA") %>%
group_by(race) %>%
summarize(count=n()) %>%
ggplot(aes(x=race,count,fill=race))+geom_col()
surgery %>%
group_by(gender) %>%
filter(!age=="NA") %>%
summarize(avg_age=mean(age)) %>%
ggplot(aes(gender,avg_age,fill=gender))+geom_col()+theme(legend.position = "bottom",
axis.text.x = element_text(angle = 0, hjust=1))
surgery %>%
filter(gender!="NA") %>%
ggplot(aes(x=gender, y=age, fill=gender))+
geom_boxplot(na.rm=T, alpha=0.6)+
labs(title="Range of Participants' Age by Gender",
x=NULL,
y="Age (years)")+
theme_light()
surgery %>%
filter(asa_status!="NA") %>%
ggplot(aes(x=asa_status, fill=asa_status))+
geom_bar(color="black", alpha=0.6)+
labs(title="ASA Status of Participants", x="ASA", y="# Participants")+
theme_light()
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n())
surgery %>%
group_by(asa_status) %>%
summarize(countofhealth=n()) %>%
ggplot(aes(asa_status,countofhealth,color=asa_status,fill=asa_status))+
geom_col()
surgery %>%
ggplot(aes(x=bmi))+
geom_density(fill="steelblue", color="black", alpha=0.6, na.rm=T)+
facet_wrap(~asa_status)+
labs(title="Distribution of BMI", x="BMI", y=NULL)+
theme_light()
surgery %>%
group_by(ahrq_ccs)
surgery %>%
group_by(ahrq_ccs) %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate)
summarize(head(n=5))
summarize(x=head(n=5))
summarize(x=head(n=5))
summarize(xs=head(n=5))
surgery %>%
group_by(ahrq_ccs) %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
summarize(xs=head(n=5))
surgery %>%
group_by(ahrq_ccs) %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
summarize(xs=head(ccsmort30rate,n=5))
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(xs=head(ccsmort30rate,n=5))
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(xs=arrange(-(ccsmort30rate)))
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(xs=arrange(desc(ccsmort30rate)))
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
head(ccsmort30rate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
head(ccsmort30rate,n=5) %>%
head(ccscomplicationrate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
head(ccscomplicationrate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
head(ccsmort30rate,n=5) %>%
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
head(ccsmort30rate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate))
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
head(ccsmort30rate,n=5)
summarize(avg=mean(ccscomplicationrate) %>%
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccscomplicationrate) %>%
head(ccscomplicationrate,n=5)
summarize(avg=mean(ccscomplicationrate) %>%
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
head(ccsmort30rate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccscomplicationrate) %>%
head(ccscomplicationrate,n=5)
head(avg,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccscomplicationrate) %>%
head(avg,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
head(ccsmort30rate,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(navg=mean(ccscomplicationrate) %>%
head(avg,n=5)
head(navg,n=5)
summarize(navg=mean(ccscomplicationrate) %>%
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(navg=mean(ccscomplicationrate) %>%
head(navg,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(navg=mean(ccscomplicationrate)) %>%
head(navg,n=5)
surgery %>%
select(ahrq_ccs,ccsmort30rate,ccscomplicationrate) %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
head(ccsmort30rate,n=5)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate))
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate))+
geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,color=ahrq_ccs))+
geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,color=ahrq_ccs))+
geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,color=ahrq_ccs))+
geom_line()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,avg,color=ahrq_ccs))+
geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,avg,fill=ahrq_ccs))+
geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,avg,fill=ahrq_ccs))+
geom_line()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ahrq_ccs,avg,fill=ahrq_ccs))+
geom_boxplot()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_boxplot()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_boxplot()+coord_flip()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_boxplot()
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+
coord_flip()+
labs(title="30-Day Mortality by Procedure",
x=NULL,
y="Rate")+
theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_boxplot()+theme_light(0)
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_boxplot()+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_cot()+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_col(position=="dodge")+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(avg,ahrq_ccs,fill=ahrq_ccs))+
geom_col(position="dodge")+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
# summarize(avg=mean(ccsmort30rate)) %>%
ggplot(aes(ccsmort30rate,ahrq_ccs,fill=ahrq_ccs))+
geom_col(position="dodge")+theme_light()
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)
surgery %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate, group=ahrq_ccs))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+coord_flip()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ccs,ahrq_ccs,fill=ahrq_ccs))+
geom_col(position="dodge")+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs))+
geom_col(position="dodge")+theme_light()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs))+
geom_col(position="dodge")
surgery %>%
#group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs))+
geom_col(position="dodge")
surgery %>%
#group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs,group=ahrq_ccs))+
geom_col(position="dodge")
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs))+
geom_col(position="dodge")
surgery %>%
group_by(ahrq_ccs)
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(x=ahrq_ccs, y=ccsmort30rate))+
geom_col(position="dodge", fill="steelblue", alpha=0.6)+coord_flip()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rte))+geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate))+geom_col()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate))+geom_col()+coord_flip()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate,fill=ahrq_ccs))+geom_col()+coord_flip()
surgery %>%
group_by(ahrq_ccs) %>%
ggplot(aes(ahrq_ccs,ccsmort30rate))+geom_col()+coord_flip()
surgery %>%
group_by(month) %>%
ggplot(aes(month,mort30))+geom_col()
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
surgery %>% tabyl(month, complication)
surgery %>% tabyl(month, mort30)
surgery_new <- surgery %>%
mutate(mort30_n = ifelse(mort30 == "Yes", 1, 0),
complication_n = ifelse(complication =="Yes", 1, 0)) %>%
group_by(month) %>%
summarise(n_deaths=sum(mort30_n),
n_comp=sum(complication_n))
surgery_new
surgery_new %>%
ggplot(aes(x=month, y=n_deaths))+
geom_col(alpha=0.8, fill="steelblue", color="black")+
labs(title="30-Day Mortality by Month",
x=NULL,
y="Rate")+
scale_x_discrete(limits=c("Jan","Feb","Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"))+
theme_light()
mutate(dead=ifelse(mort30=="Yes",1,0)
summarize(deadl=sum(dead))
surgery %>%
group_by(month) %>%
mutate(dead=ifelse(mort30=="Yes",1,0)) %>%
summarize(deadl=sum(dead))
surgery %>%
group_by(month) %>%
mutate(dead=ifelse(mort30=="Yes",1,0)) %>%
summarize(deadl=sum(dead)) %>%
ggplot(aes(month,dead1))
surgery %>%
group_by(month) %>%
mutate(dead=ifelse(mort30=="Yes",1,0)) %>%
summarize(deadl=sum(dead)) %>%
ggplot(aes(month,dead1))+geom_col()
surgery %>%
group_by(month) %>%
mutate(dead=ifelse(mort30=="Yes",1,0)) %>%
summarize(deadl=sum(dead)) %>%
ggplot(aes(month,deadl))+geom_col()
knitr::opts_chunk$set(echo = TRUE)
changeinpop<- gapminder %>%
select(country, year, pop) %>%
filter(year == 1952|year ==2007) %>%
pivot_wider(names_from = year, names_prefix = "delta", values_from = pop) %>%
mutate(growth = delta2007-delta1952) %>%
arrange(desc(growth)) %>%
head(n=5)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(here)
library(naniar)
#install.packages("gapminder")
library("gapminder")
changeinpop<- gapminder %>%
select(country, year, pop) %>%
filter(year == 1952|year ==2007) %>%
pivot_wider(names_from = year, names_prefix = "delta", values_from = pop) %>%
mutate(growth = delta2007-delta1952) %>%
arrange(desc(growth)) %>%
head(n=5)
changeinpop %>%
ggplot(aes(country,growth))+geom_boxplot()+scale_y_log10()
View(changeinpop)
